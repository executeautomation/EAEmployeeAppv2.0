@model IEnumerable<EAEmployee.Net8.Models.Employee>
@{
    ViewData["Title"] = "Employee List";
    var total = Model.Count();
}

<style>
    .page-header-bar {
        background: linear-gradient(135deg, #1a1a2e 0%, #16213e 60%, #0f3460 100%);
        border-radius: 14px;
        padding: 1.5rem 2rem;
        margin-bottom: 1.5rem;
        display: flex;
        align-items: center;
        justify-content: space-between;
        flex-wrap: wrap;
        gap: 1rem;
    }
    .page-header-bar .page-title { color: #fff; font-size: 1.5rem; font-weight: 700; margin: 0; }
    .page-header-bar .page-subtitle { color: rgba(255,255,255,.6); font-size: .85rem; margin: 0; }
    .stat-badge {
        background: rgba(255,255,255,.12);
        border: 1px solid rgba(255,255,255,.2);
        color: #fff; border-radius: 8px;
        padding: .4rem 1rem; font-size: .85rem; font-weight: 600;
    }
    .search-card {
        background: #fff;
        border: 1px solid #e9ecef;
        border-radius: 12px;
        padding: 1rem 1.25rem;
        margin-bottom: 1.25rem;
        display: flex; align-items: center; justify-content: space-between; gap: 1rem;
        flex-wrap: wrap;
        box-shadow: 0 2px 8px rgba(0,0,0,.06);
    }
    .search-input-wrap { display: flex; align-items: center; gap: .5rem; }
    .search-input-wrap input {
        border-radius: 8px; border: 1.5px solid #dee2e6;
        padding: .45rem 1rem; width: 230px; font-size: .9rem;
        transition: border-color .2s, box-shadow .2s;
    }
    .search-input-wrap input:focus {
        outline: none; border-color: #0d6efd;
        box-shadow: 0 0 0 3px rgba(13,110,253,.12);
    }
    .btn-search {
        background: #0d6efd; color: #fff; border: none;
        border-radius: 8px; padding: .45rem 1rem; font-size: .9rem;
        cursor: pointer; transition: opacity .2s;
    }
    .btn-search:hover { opacity: .85; }
    .btn-create {
        background: linear-gradient(135deg, #1a6b3c, #28a745);
        color: #fff; border: none; border-radius: 8px;
        padding: .5rem 1.25rem; font-size: .9rem; font-weight: 600;
        text-decoration: none; display: inline-flex; align-items: center; gap: .4rem;
        transition: opacity .2s, transform .1s;
    }
    .btn-create:hover { opacity: .9; transform: translateY(-1px); color: #fff; }
    .employee-table-card {
        background: #fff; border-radius: 14px;
        box-shadow: 0 4px 20px rgba(0,0,0,.08);
        overflow: hidden; border: 1px solid #eee;
    }
    .employee-table-card table { margin: 0; font-size: .92rem; }
    .employee-table-card thead th {
        background: #f8f9fa; color: #495057;
        font-weight: 700; text-transform: uppercase;
        font-size: .76rem; letter-spacing: .05em;
        border-bottom: 2px solid #e9ecef; padding: .9rem 1rem;
    }
    .employee-table-card tbody tr { transition: background .15s; }
    .employee-table-card tbody tr:hover { background: #f0f7ff; }
    .employee-table-card tbody td { padding: .85rem 1rem; vertical-align: middle; border-color: #f0f0f0; }
    .emp-name { font-weight: 600; color: #212529; }
    .emp-email { font-size: .83rem; color: #6c757d; }
    .salary-cell { font-weight: 600; color: #1a6b3c; }
    .grade-badge {
        display: inline-block; padding: .25rem .65rem;
        border-radius: 20px; font-size: .78rem; font-weight: 700; letter-spacing: .03em;
    }
    .grade-A { background: #d1e7dd; color: #0a3622; }
    .grade-B { background: #cfe2ff; color: #084298; }
    .grade-C { background: #fff3cd; color: #664d03; }
    .grade-D { background: #f8d7da; color: #842029; }
    .grade-default { background: #e9ecef; color: #495057; }
    .action-group { display: flex; gap: .4rem; }
    .btn-edit {
        background: #fff8e1; color: #c77700; border: 1px solid #ffd54f;
        border-radius: 6px; padding: .3rem .7rem; font-size: .8rem; font-weight: 600;
        text-decoration: none; transition: background .15s;
    }
    .btn-edit:hover { background: #ffd54f; color: #5d4000; }
    .btn-del {
        background: #ffebee; color: #c62828; border: 1px solid #ef9a9a;
        border-radius: 6px; padding: .3rem .7rem; font-size: .8rem; font-weight: 600;
        text-decoration: none; transition: background .15s;
    }
    .btn-del:hover { background: #ef9a9a; color: #7f0000; }
    .btn-detail {
        background: #e3f2fd; color: #1565c0; border: 1px solid #90caf9;
        border-radius: 6px; padding: .3rem .7rem; font-size: .8rem; font-weight: 600;
        text-decoration: none; transition: background .15s;
    }
    .btn-detail:hover { background: #90caf9; color: #0d47a1; }
    .empty-state {
        text-align: center; padding: 3rem 1rem; color: #adb5bd;
    }
    .empty-state .es-icon { font-size: 3rem; margin-bottom: .75rem; display: block; }
    .empty-state p { font-size: 1rem; }
    .duration-cell { color: #6c757d; font-size: .88rem; }
</style>

<div class="page-header-bar">
    <div>
        <p class="page-title">&#128101; Employees</p>
        <p class="page-subtitle">Manage your workforce records</p>
    </div>
    <span class="stat-badge">&#128202; @total employee@(total != 1 ? "s" : "")</span>
</div>

<form method="get" class="search-card">
    @if (User.IsInRole("Administrator"))
    {
        <a asp-action="Create" class="btn-create">&#43; New Employee</a>
    }
    else
    {
        <span></span>
    }
    <div class="search-input-wrap">
        <input type="text" name="searchTerm" value="@ViewBag.SearchTerm" placeholder="&#128269; Search by name..." />
        <button type="submit" class="btn-search">Search</button>
        @if (!string.IsNullOrEmpty(ViewBag.SearchTerm as string))
        {
            <a asp-action="Index" style="font-size:.85rem; color:#6c757d; text-decoration:none;">&#10005; Clear</a>
        }
    </div>
</form>

<div class="employee-table-card">
    <table class="table table-borderless">
        <thead>
            <tr>
                <th>@Html.DisplayNameFor(m => m.Name)</th>
                <th>@Html.DisplayNameFor(m => m.Salary)</th>
                <th>@Html.DisplayNameFor(m => m.DurationWorked)</th>
                <th>@Html.DisplayNameFor(m => m.Grade)</th>
                <th>@Html.DisplayNameFor(m => m.Email)</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            @if (!Model.Any())
            {
                <tr>
                    <td colspan="6">
                        <div class="empty-state">
                            <span class="es-icon">&#128101;</span>
                            <p>No employees found. @(User.IsInRole("Administrator") ? "Click \"+ New Employee\" to add one." : "")</p>
                        </div>
                    </td>
                </tr>
            }
            else
            {
                foreach (var item in Model)
                {
                    var gradeCss = item.Grade switch { 1 => "grade-A", 2 => "grade-B", 3 => "grade-C", 4 => "grade-D", _ => "grade-default" };
                    var gradeLabel = item.Grade switch { 1 => "Junior", 2 => "Middle", 3 => "Senior", 4 => "C-Level", _ => item.Grade.ToString() };
                    <tr>
                        <td><span class="emp-name">@item.Name</span></td>
                        <td><span class="salary-cell">$@item.Salary.ToString("N2")</span></td>
                        <td><span class="duration-cell">@item.DurationWorked mo.</span></td>
                        <td><span class="grade-badge @gradeCss">@gradeLabel</span></td>
                        <td><span class="emp-email">@item.Email</span></td>
                        <td>
                            <div class="action-group">
                                <a asp-controller="EmployeeDetails" asp-action="Index" asp-route-id="@item.Id" class="btn-detail">&#128203; Details</a>
                                @if (User.IsInRole("Administrator"))
                                {
                                    <a asp-action="Edit" asp-route-id="@item.Id" class="btn-edit">&#9998; Edit</a>
                                    <a asp-action="Delete" asp-route-id="@item.Id" class="btn-del">&#128465; Delete</a>
                                }
                            </div>
                        </td>
                    </tr>
                }
            }
        </tbody>
    </table>
</div>
